window.Ecom=(function(){var k=[];var j=function(l,m){if(typeof l==="object"&&l!==null){if(l.hasOwnProperty("size")){var n=l.size.split("x");if(n.length===2){return n[m]}}else{return j(l.logo)}}return null};var f={name:function(l,m){if(!m&&typeof this==="object"&&this!==null&&this.Store){m=this.Store.lang}if(m&&l.hasOwnProperty("i18n")&&l.i18n.hasOwnProperty(m)){return l.i18n[m]}else{return l.name}},width:function(l){j(l,0)},height:function(l){j(l,1)},price:function(l){if(l.hasOwnProperty("price")){return l.price}else{return l.base_price}},formatMoney:function(p,l,m,q){if(!l){l=","}if(!m){m="."}if(!q){q=2}if(typeof p==="object"){if(p!==null){p=p.price}}else{if(typeof p==="string"){p=parseFloat(p)}}if(typeof p==="number"&&!isNaN(p)){return p.toFixed(q).replace(m,l).replace(/(\d)(?=(\d{3})+,)/g,"$1.")}else{var o="0"+l;for(var n=0;n<q;n++){o+="0"}return o}},onPromotion:function(l){if(l.hasOwnProperty("price_effective_date")){var m=new Date();if(l.price_effective_date.hasOwnProperty("start")){if(new Date(l.price_effective_date.start)<m){return false}}if(l.price_effective_date.hasOwnProperty("end")){if(new Date(l.price_effective_date.end)>m){return false}}}if(l.price&&l.base_price){return true}return false},alphabeticalSort:function(l){if(Array.isArray(l)){l.sort(function(n,m){if(n.name<m.name){return -1}return 1})}else{if(typeof l==="object"&&l!==null){return f.alphabeticalSort(l.results)}}return l}};var h={methods:{}};for(var a in f){if(f.hasOwnProperty(a)){h.methods[a]=function(){var l=[];for(var m=0;m<arguments.length;m++){l.push(arguments[m])}if(!l[0]){l[0]=this.$data}return f[a].apply(null,l)}}}var i=[h];var e=function(r,q,n){if(!Array.isArray(n)){n=[]}if(r.childNodes){for(var m=0;m<r.childNodes.length;m++){var p=r.childNodes[m];var l=p.classList;if(l){for(var o=0;o<l.length;o++){if(l[o]===q){n.push(p);break}}}e(p,q,n)}}return n};var d=function(l){var m;if(l.hasOwnProperty("el")){m=l.el}else{m=document.getElementsByTagName("BODY")[0]}var n=function(q,v){if(!q){var s,o;if(typeof v==="object"&&v!==null){l.store_id=v.store_id;l.store_object_id=v.store_object_id}var r=e(m,"_ecom-el");var w={};var p,u,t,x,y;for(s=0;s<r.length;s++){o=r[s];switch(o.dataset.type){case"product":case"brand":case"collection":case"customer":case"cart":case"order":case"application":case"store":p=o.dataset.type+"s";break;case"category":p=o.dataset.type.slice(0,-1)+"ies";break}if(p!==undefined){t=x=false;u=o.dataset.id;if(!u){if(p==="stores"){u=l.store_object_id}else{if(o.dataset.hasOwnProperty("listAll")){t=true}else{if(!y){y=true}x=true}}}c(w,o,p,u,t,x)}else{console.log("Ignored element, invalid type:");console.log(o)}}if(y===true){EcomIo.mapByWindowUri(function(A,z){if(!A){b(l,w,z)}else{console.error(A)}})}else{b(l,w)}}else{console.error(q)}};if(l.hasOwnProperty("store_id")&&l.hasOwnProperty("store_object_id")){EcomIo.init(n,l.store_id,l.store_object_id)}else{EcomIo.init(n)}};var c=function(m,o,q,r,p,l){var n;if(!p&&!l){n=r}else{n=q}if(m.hasOwnProperty(n)){if(m[n].resource===q){m[n].els.push(o)}else{console.log("Ignored element, different types for same id (?):");console.log(o)}}else{m[n]={resource:q,list:p,current:l,els:[o]}}};var b=function(n,l,m){for(var s in l){if(l.hasOwnProperty(s)){var o=l[s];var p=o.resource;var r=(function(){var t=o.els;return function(w,u){if(!w){for(var v=0;v<t.length;v++){g(n,t[v],u)}}else{console.error(w)}}}());if(!o.list){if(!o.current){EcomIo.getById(r,p,s)}else{if(p===m.resource){EcomIo.getById(r,p,m._id)}else{console.log("Ignored elements, id undefined and type does not match with URI resource:");console.log(o.els)}}}else{var q="list"+p.charAt(0).toUpperCase()+p.slice(1);if(EcomIo.hasOwnProperty(q)){EcomIo[q](r)}else{console.log("Ignored elements, list all unavailable for this resource:");console.log(o.els)}}}}};var g=function(m,o,l){l.Store=m;var n=new Vue({mixins:i,el:o,data:{body:l},destroyed:function(){this.$el.classList.add("rendered")}});n.$destroy()};f.init=function(r,s,m,q){var o,n;console.log("Init E-Com Plus store rendering");if(s&&m){n={store_id:parseInt(s,10),store_object_id:m};if(q){n.lang=q}k.push(n)}else{var l=document.getElementsByClassName("_ecom-store");if(typeof l==="object"&&l!==null){for(o=0;o<l.length;o++){var p=l[o];n={el:p};if(p.dataset.store&&p.dataset.id){n.store_id=parseInt(p.dataset.store,10);n.store_object_id=p.dataset.id}if(p.dataset.lang){n.lang=p.dataset.lang}k.push(n)}}}if(Array.isArray(r)){for(o=0;o<r.length;o++){i.push(r[o])}}for(o=0;o<k.length;o++){d(k[o])}};f.stores=function(){return k};return f}());