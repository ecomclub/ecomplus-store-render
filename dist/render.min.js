window.Ecom=(function(){var i=[];var h=function(j,k){if(typeof j==="object"&&j!==null){if(j.hasOwnProperty("size")){var l=j.size.split("x");if(l.length===2){return l[k]}}else{return h(j.logo)}}return null};var d={name:function(j,k){if(!k&&typeof this==="object"&&this!==null&&this.Store){k=this.Store.lang}if(k&&j.hasOwnProperty("i18n")&&j.i18n.hasOwnProperty(k)){return j.i18n[k]}else{return j.name}},width:function(j){h(j,0)},height:function(j){h(j,1)},price:function(j){if(j.hasOwnProperty("price")){return j.price}else{return j.base_price}},formatMoney:function(n,j,k,o){if(!j){j=","}if(!k){k="."}if(!o){o=2}if(typeof n==="object"){if(n!==null){n=n.price}}else{if(typeof n==="string"){n=parseFloat(n)}}if(typeof n==="number"&&!isNaN(n)){return n.toFixed(o).replace(k,j).replace(/(\d)(?=(\d{3})+,)/g,"$1.")}else{var m="0"+j;for(var l=0;l<o;l++){m+="0"}return m}},onPromotion:function(j){if(j.hasOwnProperty("price_effective_date")){var k=new Date();if(j.price_effective_date.hasOwnProperty("start")){if(new Date(j.price_effective_date.start)<k){return false}}if(j.price_effective_date.hasOwnProperty("end")){if(new Date(j.price_effective_date.end)>k){return false}}}if(j.price&&j.base_price){return true}return false},alphabeticalSort:function(j){if(Array.isArray(j)){j.sort(function(l,k){if(l.name<k.name){return -1}return 1})}else{if(typeof j==="object"&&j!==null){return d.alphabeticalSort(j.results)}}return j}};var f={methods:{}};for(var a in d){if(d.hasOwnProperty(a)){f.methods[a]=function(){var j=[];for(var k=0;k<arguments.length;k++){j.push(arguments[k])}if(!j[0]){j[0]=this.$data}return d[a].apply(null,j)}}}var g=[f];var c=function(p,o,l){if(!Array.isArray(l)){l=[]}if(p.childNodes){for(var k=0;k<p.childNodes.length;k++){var n=p.childNodes[k];var j=n.classList;if(j){for(var m=0;m<j.length;m++){if(j[m]===o){l.push(n);break}}}c(n,o,l)}}return l};var b=function(j){var k;if(j.hasOwnProperty("el")){k=j.el}else{k=document.getElementsByTagName("BODY")[0]}var l=function(q,u){if(!q){var s,m;if(typeof u==="object"&&u!==null){j.store_id=u.store_id;j.store_object_id=u.store_object_id}var r=c(k,"_ecom-el");var v={};var t;var p;var o=function(){if(v.hasOwnProperty(t)){if(v[t].resource===p){v[t].els.push(m)}else{console.log("Ignored element, different types for same id (?):");console.log(m)}}else{v[t]={resource:p,els:[m]}}};for(s=0;s<r.length;s++){m=r[s];switch(m.dataset.type){case"product":case"brand":case"collection":case"customer":case"cart":case"order":case"application":case"store":p=m.dataset.type+"s";break;case"category":p=m.dataset.type.slice(0,-1)+"ies";break}if(p!==undefined){t=m.dataset.id;if(!t){if(p==="stores"){t=j.store_object_id;o()}else{EcomIo.mapByWindowUri(function(x,w){if(!x){if(p===w.resource){t=w._id;o()}else{console.log("Ignored element, id undefined and type does not match with URI resource:");console.log(m)}}else{console.error(x)}})}}else{o()}}else{console.log("Ignored element, invalid type:");console.log(m)}}for(t in v){if(v.hasOwnProperty(t)){var n=v[t];l=function(x,w){if(!x){r=n.els;for(s=0;s<r.length;s++){e(j,r[s],w)}}else{console.error(x)}};EcomIo.getById(l,n.resource,t)}}}else{console.error(q)}};if(j.hasOwnProperty("store_id")&&j.hasOwnProperty("store_object_id")){console.log("Init storefront SDK for #"+j.store_id);EcomIo.init(l,j.store_id,j.store_object_id)}else{console.log("Init storefront SDK for self host");EcomIo.init(l)}};var e=function(k,m,j){j.Store=k;var l=new Vue({mixins:g,el:m,data:{body:j}});l.$destroy();m.classList.add("rendered")};d.init=function(p,q,k,o){var m,l;console.log("Init E-Com Plus store rendering");if(q&&k){l={store_id:parseInt(q,10),store_object_id:k};if(o){l.lang=o}i.push(l)}else{var j=document.getElementsByClassName("_ecom-store");if(typeof j==="object"&&j!==null){for(m=0;m<j.length;m++){var n=j[m];l={el:n};if(n.dataset.store&&n.dataset.id){l.store_id=parseInt(n.dataset.store,10);l.store_object_id=n.dataset.id}if(n.dataset.lang){l.lang=n.dataset.lang}i.push(l)}}}if(Array.isArray(p)){for(m=0;m<p.length;m++){g.push(p[m])}}for(m=0;m<i.length;m++){b(i[m])}};d.stores=function(){return i};return d}());