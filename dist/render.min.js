window.Ecom=(function(){var l=[];var j=function(m,n){if(typeof m==="object"&&m!==null){if(m.hasOwnProperty("size")){var o=m.size.split("x");if(o.length===2){return o[n]}}else{return j(m.logo)}}return null};var f={name:function(m,n){if(!n&&typeof this==="object"&&this!==null&&this.Store){n=this.Store.lang}if(n&&m.hasOwnProperty("i18n")&&m.i18n.hasOwnProperty(n)){return m.i18n[n]}else{return m.name}},width:function(m){j(m,0)},height:function(m){j(m,1)},price:function(m){if(m.hasOwnProperty("price")){return m.price}else{return m.base_price}},formatMoney:function(q,m,n,r){if(!m){m=","}if(!n){n="."}if(!r){r=2}if(typeof q==="object"){if(q!==null){q=q.price}}else{if(typeof q==="string"){q=parseFloat(q)}}if(typeof q==="number"&&!isNaN(q)){return q.toFixed(r).replace(n,m).replace(/(\d)(?=(\d{3})+,)/g,"$1.")}else{var p="0"+m;for(var o=0;o<r;o++){p+="0"}return p}},onPromotion:function(m){if(m.hasOwnProperty("price_effective_date")){var n=new Date();if(m.price_effective_date.hasOwnProperty("start")){if(new Date(m.price_effective_date.start)<n){return false}}if(m.price_effective_date.hasOwnProperty("end")){if(new Date(m.price_effective_date.end)>n){return false}}}if(m.price&&m.base_price){return true}return false},alphabeticalSort:function(m){if(Array.isArray(m)){m.sort(function(o,n){if(o.name<n.name){return -1}return 1})}else{if(typeof m==="object"&&m!==null){return f.alphabeticalSort(m.results)}}return m}};var h={methods:{}};for(var a in f){if(f.hasOwnProperty(a)){h.methods[a]=function(){var m=[];for(var n=0;n<arguments.length;n++){m.push(arguments[n])}if(!m[0]){m[0]=this.$data}return f[a].apply(null,m)}}}var i=[h];var e=function(s,r,o){if(!Array.isArray(o)){o=[]}if(s.childNodes){for(var n=0;n<s.childNodes.length;n++){var q=s.childNodes[n];var m=q.classList;if(m){for(var p=0;p<m.length;p++){if(m[p]===r){o.push(q);break}}}e(q,r,o)}}return o};var d=function(m){var n;if(m.hasOwnProperty("el")){n=m.el}else{n=document.getElementsByTagName("BODY")[0]}var o=function(r,w){if(!r){var t,p;if(typeof w==="object"&&w!==null){m.store_id=w.store_id;m.store_object_id=w.store_object_id}var s=e(n,"_ecom-el");var x={};var q,v,u,y,z;for(t=0;t<s.length;t++){p=s[t];var A=false;switch(p.dataset.type){case"product":case"brand":case"collection":case"customer":case"cart":case"order":case"application":case"store":q=p.dataset.type+"s";break;case"category":q=p.dataset.type.slice(0,-1)+"ies";break;case"items":k(m,p);A=true;break;default:console.log("Ignored element, invalid type:");console.log(p);A=true}if(A===true){continue}u=y=false;v=p.dataset.id;if(!v){if(q==="stores"){v=m.store_object_id}else{if(p.dataset.hasOwnProperty("listAll")){u=true}else{if(!z){z=true}y=true}}}c(x,p,q,v,u,y)}if(z===true){EcomIo.mapByWindowUri(function(C,B){if(!C){b(m,x,B)}else{console.error(C)}})}else{b(m,x)}}else{console.error(r)}};if(m.hasOwnProperty("store_id")&&m.hasOwnProperty("store_object_id")){EcomIo.init(o,m.store_id,m.store_object_id)}else{EcomIo.init(o)}};var c=function(n,p,r,s,q,m){var o;if(!q&&!m){o=s}else{o=r}if(n.hasOwnProperty(o)){if(n[o].resource===r){n[o].els.push(p)}else{console.log("Ignored element, different types for same id (?):");console.log(p)}}else{n[o]={resource:r,list:q,current:m,els:[p]}}};var b=function(o,m,n){for(var t in m){if(m.hasOwnProperty(t)){var p=m[t];var q=p.resource;var s=(function(){var u=p.els;return function(x,v){if(!x){for(var w=0;w<u.length;w++){g(o,u[w],v)}}else{console.error(x)}}}());if(!p.list){if(!p.current){EcomIo.getById(s,q,t)}else{if(q===n.resource){EcomIo.getById(s,q,n._id)}else{console.log("Ignored elements, id undefined and type does not match with URI resource:");console.log(p.els)}}}else{var r="list"+q.charAt(0).toUpperCase()+q.slice(1);if(EcomIo.hasOwnProperty(r)){EcomIo[r](s)}else{console.log("Ignored elements, list all unavailable for this resource:");console.log(p.els)}}}}};var k=function(o,p){var m={};for(var r in p.dataset){if(p.dataset.hasOwnProperty(r)){switch(r){case"term":m[r]=p.dataset[r];break;case"from":case"size":case"sort":m[r]=parseInt(p.dataset[r],10);break;case"ids":case"brands":case"categories":m[r]=p.dataset[r].split(",");break;case"priceMin":if(!m.hasOwnProperty("prices")){m.prices={}}m.prices.min=parseFloat(p.dataset[r]);break;case"priceMax":if(!m.hasOwnProperty("prices")){m.prices={}}m.prices.max=parseFloat(p.dataset[r]);break;default:if(r.startsWith("spec")){if(!m.hasOwnProperty("specs")){m.specs={}}var n=r.charAt(4).toLowerCase()+r.substr(5);var q=p.dataset[r];if(q.charAt(0)==="["){try{var t=JSON.parse(q);if(Array.isArray(t)){m.specs[n]=t}}catch(s){}}if(!m.specs.hasOwnProperty(n)){m.specs[n]=[q]}}}}}EcomIo.searchProducts(function(v,u){if(!v){console.log(u);g(o,p,u)}else{console.error(v)}},m.term,m.from,m.size,m.sort,m.specs,m.ids,m.brands,m.categories,m.prices)};var g=function(n,p,m){m.Store=n;var o=new Vue({mixins:i,el:p,data:{body:m},destroyed:function(){this.$el.classList.add("rendered")}});o.$destroy()};f.init=function(s,t,n,r){var p,o;console.log("Init E-Com Plus store rendering");if(t&&n){o={store_id:parseInt(t,10),store_object_id:n};if(r){o.lang=r}l.push(o)}else{var m=document.getElementsByClassName("_ecom-store");if(typeof m==="object"&&m!==null){for(p=0;p<m.length;p++){var q=m[p];o={el:q};if(q.dataset.store&&q.dataset.id){o.store_id=parseInt(q.dataset.store,10);o.store_object_id=q.dataset.id}if(q.dataset.lang){o.lang=q.dataset.lang}l.push(o)}}}if(Array.isArray(s)){for(p=0;p<s.length;p++){i.push(s[p])}}for(p=0;p<l.length;p++){d(l[p])}};f.stores=function(){return l};return f}());