/**
 * ecomplus-render - Vue.js app to render E-Com Plus store template
 * @version v2.5.0
 * @link https://github.com/ecomclub/ecomplus-store-render#readme
 * @author E-Com Club
 * @license MIT
 */
!function(){var s={};!function(){"use strict";var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},t={};s={Ecom:t,root:e,_:{}};var r={Vue:"vue",EcomIo:"ecomplus-sdk"};for(var o in r)if(r.hasOwnProperty(o)){var n=r[o];if(e.hasOwnProperty(o))s[o]=e[o];else{if("function"!=typeof require)return console.error(o+" (`"+n+"`) is required and undefined");s[o]=require(n)}}"undefined"==typeof exports||exports.nodeType?e.Ecom=t:("undefined"!=typeof module&&module.exports&&!module.nodeType&&(exports=module.exports=t),exports.Ecom=t)}(),function(){"use strict";s._.getCookie=function(e){var t=root.document.cookie;if("string"==typeof t)for(var r=e+"=",o=decodeURIComponent(t).split(";"),n=0;n<o.length;n++){for(var s=o[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(r))return s.substring(r.length,s.length)}return null}}(),function(){"use strict";var g=s.root,e=s.Ecom,v=s.EcomIo;if(e&&v){var m,_,l,o=s.Vue,b=s._.getCookie,f=[],n={methods:{}};e.addVueMethod=function(e,r){n.methods[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e[0]||(e[0]=this.$data.body),r.apply(null,e)}},o.config.errorHandler=function(e,t,r){console.error(e),console.log("Vue instance with error, $el and $data:"),console.log(t.$el),console.log(t.$data),console.log(r),console.log("-----//-----")};var w=function(e,t,r){if(Array.isArray(r)||(r=[]),e.childNodes)for(var o=0;o<e.childNodes.length;o++){var n=e.childNodes[o],s=n.classList;if(s)for(var a=0;a<s.length;a++)if(s[a]===t){r.push(n);break}w(n,t,r)}return r},d=function(y){var h;h=y.hasOwnProperty("el")?y.el:g.document.getElementsByTagName("BODY")[0];y.hasOwnProperty("store_id")||(y.store_id=b("Ecom.store_id")),y.store_id&&(y.hasOwnProperty("store_object_id")||(y.store_object_id=b("Ecom.store_object_id")),y.lang||(y.lang=b("Ecom.default_lang"))),v.init(function(e,t){if(e)console.error(e);else{var r,o;"object"==typeof t&&null!==t&&(y.store_id=t.store_id,y.store_object_id=t.store_object_id,!y.lang&&t.default_lang&&(y.lang=t.default_lang));var n,s,a,i,c,l=w(h,"_ecom-el"),f={};for(r=0;r<l.length;r++){var d=!1;switch((o=l[r]).dataset.type){case"product":case"brand":case"collection":case"customer":case"cart":case"order":case"application":case"store":n=o.dataset.type+"s";break;case"category":n=o.dataset.type.slice(0,-1)+"ies";break;case"items":j(y,o),d=!0;break;default:console.log("Ignored element, invalid type:"),console.log(o),d=!0}!0!==d&&(a=i=!1,(s=o.dataset.id)||("stores"===n?s=y.store_object_id:o.dataset.hasOwnProperty("listAll")?a=!0:(c||(c=!0),i=!0)),P(f,o,n,s,a,i))}if(m=_=0,!0===c){var u={};if(g.location){var p=g.location.pathname;p&&(u.resource=b("Ecom."+p+":resource"),u._id=b("Ecom."+p+":_id"))}u.resource&&u._id?O(y,f,u):v.mapByWindowUri(function(e,t){e?console.error(e):O(y,f,t)})}else O(y,f)}},y.store_id,y.store_object_id)},P=function(e,t,r,o,n,s){var a;a=n||s?r:o,e.hasOwnProperty(a)?e[a].resource===r?e[a].els.push(t):(console.log("Ignored element, different types for same id (?):"),console.log(t)):e[a]={resource:r,list:n,current:s,els:[t]}},O=function(i,e,t){for(var r in e)if(e.hasOwnProperty(r)){var o=e[r],n=o.resource,s=function(){var a=o.els;return function(e,t){if(e)console.error(e);else for(var r=0;r<a.length;r++){var o=a[r];if(o.dataset.hasOwnProperty("list")){var n=o.dataset.list;if(t.hasOwnProperty(n)){var s=t[n];Array.isArray(s)?o.dataset.ids=s.join():"string"==typeof s&&(o.dataset.ids=s)}j(i,o,t)}else c(i,o,t)}}}();if(o.list){var a="list"+n.charAt(0).toUpperCase()+n.slice(1);v.hasOwnProperty(a)?v[a](s):(console.log("Ignored elements, list all unavailable for this resource:"),console.log(o.els))}else o.current?n===t.resource?v.getById(s,n,t._id):(console.log("Ignored elements, id undefined and type does not match with URI resource:"),console.log(o.els)):v.getById(s,n,r);m++}},j=function(r,o,n){var e={};for(var t in o.dataset)if(o.dataset.hasOwnProperty(t))switch(t){case"term":e[t]=o.dataset[t];break;case"from":case"size":case"sort":e[t]=parseInt(o.dataset[t],10);break;case"ids":case"brands":case"categories":e[t]=o.dataset[t].split(",");break;case"priceMin":e.hasOwnProperty("prices")||(e.prices={}),e.prices.min=parseFloat(o.dataset[t]);break;case"priceMax":e.hasOwnProperty("prices")||(e.prices={}),e.prices.max=parseFloat(o.dataset[t]);break;default:if(t.startsWith("spec")){e.hasOwnProperty("specs")||(e.specs={});var s=t.charAt(4).toLowerCase()+t.substr(5),a=o.dataset[t];if("["===a.charAt(0))try{var i=JSON.parse(a);Array.isArray(i)&&(e.specs[s]=i)}catch(e){}e.specs.hasOwnProperty(s)||(e.specs[s]=[a])}}v.searchProducts(function(e,t){e?console.error(e):("object"==typeof n&&null!==n&&(t=Object.assign(n,t)),c(r,o,t))},e.term,e.from,e.size,e.sort,e.specs,e.ids,e.brands,e.categories,e.prices)},c=function(e,t,r){r.Store=e,new o({mixins:[n],el:t,data:{body:r},destroyed:function(){var e=this.$el;"object"==typeof e&&null!==e&&e.classList&&e.classList.add("rendered"),++_===m&&"function"==typeof l&&l()}}).$destroy()};e.stores=function(){return f},e.init=function(e,t,r,o,n){var s,a;if(console.log("Init E-Com Plus store rendering"),n)g.document=n;else if(!g.document)return void console.error("Root `document` (DOM) object is undefined or invalid");if(t&&r)a={store_id:parseInt(t,10),store_object_id:r},o&&(a.lang=o),f.push(a);else{var i=g.document.getElementsByClassName("_ecom-store");if("object"==typeof i&&null!==i)for(s=0;s<i.length;s++){var c=i[s];a={el:c},c.dataset.store&&c.dataset.id&&(a.store_id=parseInt(c.dataset.store,10),a.store_object_id=c.dataset.id),c.dataset.lang&&(a.lang=c.dataset.lang),f.push(a)}}f.length&&(l=function(){++s<f.length?d(f[s]):"function"==typeof e&&e()},d(f[s=0]))}}}(),function(){"use strict";var e=s.Ecom;if(e){var t=e.addVueMethod;if("function"==typeof t){var o=function(e,t){if("object"==typeof e&&null!==e){if(!e.hasOwnProperty("size"))return o(e.logo);var r=e.size.split("x");if(2===r.length)return r[t]}return null},a={name:function(e,t){return!t&&"object"==typeof this&&null!==this&&this.Store&&(t=this.Store.lang),t&&e.hasOwnProperty("i18n")&&e.i18n.hasOwnProperty(t)?e.i18n[t]:e.name},width:function(e){o(e,0)},height:function(e){o(e,1)},price:function(e){return!e.hasOwnProperty("base_price")||a.onPromotion(e)?e.price:e.base_price},minQuantity:function(e){return e.min_quantity||1},inStock:function(e){return!e.hasOwnProperty("quantity")||e.quantity>=a.minQuantity(e)},formatMoney:function(e,t,r,o){if(t||(t=","),r||(r="."),o||(o=2),"object"==typeof e?null!==e&&(e=a.price(e)):"string"==typeof e&&(e=parseFloat(e)),"number"!=typeof e||isNaN(e)){for(var n="0"+t,s=0;s<o;s++)n+="0";return n}return e.toFixed(o).replace(r,t).replace(/(\d)(?=(\d{3})+,)/g,"$1.")},onPromotion:function(e){if(e.hasOwnProperty("price_effective_date")){var t=new Date;if(e.price_effective_date.hasOwnProperty("start")&&new Date(e.price_effective_date.start)<t)return!1;if(e.price_effective_date.hasOwnProperty("end")&&new Date(e.price_effective_date.end)>t)return!1}return!(!e.hasOwnProperty("price")||!e.hasOwnProperty("base_price"))},alphabeticalSort:function(e){if(Array.isArray(e))e.sort(function(e,t){return e.name<t.name?-1:1});else if("object"==typeof e&&null!==e)return a.alphabeticalSort(e.results);return e},findByProperty:function(e,t,r){if(Array.isArray(e))for(var o=0;o<e.length;o++){var n=e[o];if(n&&n[t]===r)return n}},findBySlug:function(e,t){if(Array.isArray(e))return a.findProperty(e,"slug",t)},specTextValue:function(e,t,r){var o=[];if(Array.isArray(e))o=e;else{var n=e.specifications;if(n)for(var s in n)n.hasOwnProperty(s)&&s===t&&(o=n[s])}if(o.length){var a=o[0].text;r||(r=", ");for(var i=1;i<o.length;i++)a+=r+o[i].text;return a}return null}};for(var r in a)a.hasOwnProperty(r)&&t(r,a[r])}}}()}();